{"version":3,"file":"613.bundle.js","mappings":"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","sources":["webpack://newwebsite/./src/api/auth/tokenLogin.ts","webpack://newwebsite/./src/components/Auth/TokenLogin.tsx"],"sourcesContent":["import { config } from '../../config/config';\nimport http from '../http';\n\n\nconst tokenLogin = (token: string ): Promise<any> => {\n  return new Promise<any>((resolve, reject) => {\n    http\n      .post(`${config.privateapilink}/auth/tokenlogin`, { token })\n      .then((data) => resolve(data))\n      .catch(reject);\n  });\n};\n\nexport default tokenLogin;","import React, { useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport useSWR from \"swr\";\nimport { fetcher } from \"../../api/http\";\nimport tokenLogin from \"../../api/auth/tokenLogin\";\nimport { toast } from \"react-toastify\";\nimport md5 from \"blueimp-md5\";\nimport Loading from \"../Elements/Loading\";\nimport { config } from \"../../config/config\";\n\nconst TokenLogin = () => {\n  const { token } = useParams();\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  const {data, error, isLoading} = useSWR(`${config.privateapilink}/auth/tokendata?token=${token}`, fetcher);\n  if(!data || (error || isLoading)) {\n    return (\n      <Loading/>\n    )\n  }\n  if(data.data['status'] === 'error' || !token) {\n    return (\n      <p className='text-center'>Invalid token.</p>\n    )\n  }\n  const sendLogin = () => {\n    tokenLogin(token).then((data) => {\n      if(data.data['status'] === 'error') {\n        toast.error('Error. Can\\'t get your account data with this token.', {\n          position: \"bottom-right\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n          theme: \"dark\",\n        });\n      } else {\n        document.cookie = `access_token=${data.data['data']['access_token']}; path=/; expires=${new Date(Date.now() + 6 * 60 * 60 * 1000).toUTCString()}`;\n        toast.success('Success! Your are now logged.', {\n          position: \"bottom-right\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n          theme: \"dark\",\n        });\n        navigate('/');\n        window.location.reload();\n      }\n      setLoading(false)\n    })\n  }\n  return (\n   <div className={'flex flex-col items-center justify-center h-full'}>\n     <img src={`https://www.gravatar.com/avatar/${md5(data.data['email'])}?d=404`} alt='test'\n          onError={({ currentTarget }) => {\n            currentTarget.onerror = null; // prevents looping\n            currentTarget.src = `https://ui-avatars.com/api/?background=042049&color=5271ff&name=${data.data['name']}`;\n          } }\n          className={'rounded-md h-64 w-64 my-4'} />\n     <p className={'text-4xl'}>Login as {data.data['name']}</p>\n     <button className={'btn btn-primary mt-4 btn-lg'} disabled={loading} onClick={() => sendLogin()}>Login</button>\n   </div>\n  )\n}\n\nexport default TokenLogin"],"names":["config","http","tokenLogin","token","Promise","resolve","reject","post","privateapilink","then","data","catch","React","useState","useNavigate","useParams","useSWR","fetcher","toast","md5","Loading","TokenLogin","loading","setLoading","navigate","error","isLoading","createElement","className","sendLogin","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","document","cookie","Date","now","toUTCString","success","window","location","reload","src","alt","onError","_ref","currentTarget","onerror","disabled","onClick"],"sourceRoot":""}