"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(globalThis["webpackChunknewwebsite"] = globalThis["webpackChunknewwebsite"] || []).push([["src_components_Auth_AddPasskey_tsx"],{

/***/ "./src/api/auth/passkeys/addPasskey.ts":
/*!*********************************************!*\
  !*** ./src/api/auth/passkeys/addPasskey.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config/config */ \"./src/config/config.ts\");\n/* harmony import */ var _http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../http */ \"./src/api/http.ts\");\n\n\nconst addPasskey = function (token) {\n  return new Promise(function (resolve, reject) {\n    _http__WEBPACK_IMPORTED_MODULE_1__[\"default\"].post(`${_config_config__WEBPACK_IMPORTED_MODULE_0__.config.apilink}/auth/passkeys/add`, {\n      token\n    }).then(function (data) {\n      return resolve(data);\n    }).catch(reject);\n  });\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (addPasskey);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL2F1dGgvcGFzc2tleXMvYWRkUGFzc2tleS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFnRDtBQUNsQjtBQUc5QixNQUFNRSxVQUFVLEdBQUcsU0FBQUEsQ0FBQ0MsS0FBVSxFQUFtQjtFQUM3QyxPQUFPLElBQUlDLE9BQU8sQ0FBTSxVQUFDQyxPQUFPLEVBQUVDLE1BQU0sRUFBSztJQUN6Q0wsNkNBQUksQ0FDQ00sSUFBSSxDQUFFLEdBQUVQLGtEQUFNLENBQUNRLE9BQVEsb0JBQW1CLEVBQUU7TUFBRUw7SUFBTSxDQUFDLENBQUMsQ0FDdERNLElBQUksQ0FBQyxVQUFDQyxJQUFJO01BQUEsT0FBS0wsT0FBTyxDQUFDSyxJQUFJLENBQUM7SUFBQSxFQUFDLENBQzdCQyxLQUFLLENBQUNMLE1BQU0sQ0FBQztFQUN0QixDQUFDLENBQUM7QUFDTixDQUFDO0FBRUQsaUVBQWVKLFVBQVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXd3ZWJzaXRlLy4vc3JjL2FwaS9hdXRoL3Bhc3NrZXlzL2FkZFBhc3NrZXkudHM/YjQyNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb25maWcgfSBmcm9tICcuLi8uLi8uLi9jb25maWcvY29uZmlnJztcbmltcG9ydCBodHRwIGZyb20gJy4uLy4uL2h0dHAnO1xuXG5cbmNvbnN0IGFkZFBhc3NrZXkgPSAodG9rZW46IGFueSk6IFByb21pc2U8YW55PiA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPGFueT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBodHRwXG4gICAgICAgICAgICAucG9zdChgJHtjb25maWcuYXBpbGlua30vYXV0aC9wYXNza2V5cy9hZGRgLCB7IHRva2VuIH0pXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gcmVzb2x2ZShkYXRhKSlcbiAgICAgICAgICAgIC5jYXRjaChyZWplY3QpO1xuICAgIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgYWRkUGFzc2tleTtcbiJdLCJuYW1lcyI6WyJjb25maWciLCJodHRwIiwiYWRkUGFzc2tleSIsInRva2VuIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJwb3N0IiwiYXBpbGluayIsInRoZW4iLCJkYXRhIiwiY2F0Y2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/api/auth/passkeys/addPasskey.ts\n");

/***/ }),

/***/ "./src/components/Auth/AddPasskey.tsx":
/*!********************************************!*\
  !*** ./src/components/Auth/AddPasskey.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AddPasskey)\n/* harmony export */ });\n/* harmony import */ var preact_compat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! preact/compat */ \"./node_modules/preact/compat/dist/compat.module.js\");\n/* harmony import */ var _Elements_Loading__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Elements/Loading */ \"./src/components/Elements/Loading.tsx\");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-router-dom */ \"./node_modules/react-router/dist/index.js\");\n/* harmony import */ var _api_auth_passkeys_addPasskey__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../api/auth/passkeys/addPasskey */ \"./src/api/auth/passkeys/addPasskey.ts\");\n/* harmony import */ var swr__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! swr */ \"./node_modules/swr/core/dist/index.mjs\");\n/* harmony import */ var _config_config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../config/config */ \"./src/config/config.ts\");\n/* harmony import */ var _api_http__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../api/http */ \"./src/api/http.ts\");\n/* harmony import */ var react_toastify__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-toastify */ \"./node_modules/react-toastify/dist/react-toastify.esm.mjs\");\n/* harmony import */ var _App__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../App */ \"./src/App.tsx\");\n/* harmony import */ var preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! preact/jsx-runtime */ \"./node_modules/preact/jsx-runtime/dist/jsxRuntime.module.js\");\n\n\n\n\n\n\n\n\n\n\n\nfunction AddPasskey() {\n  const {\n    token\n  } = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_9__.useParams)();\n  const navigate = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_9__.useNavigate)();\n  const {\n    dark\n  } = (0,_App__WEBPACK_IMPORTED_MODULE_7__.useDark)();\n  const {\n    mutate\n  } = (0,swr__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(`${_config_config__WEBPACK_IMPORTED_MODULE_4__.config.privateapilink}/auth/isLogged?infos=true`, _api_http__WEBPACK_IMPORTED_MODULE_5__.fetcher);\n  if (!token) {\n    navigate('/');\n    return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.Fragment, {});\n  }\n  (0,preact_compat__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    (0,_api_auth_passkeys_addPasskey__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(token).then(function (data) {\n      document.cookie = `access_token=${data.data.data}; path=/; expires=${new Date(Date.now() + 6 * 60 * 60 * 1000).toUTCString()}`;\n      navigate('/');\n      mutate();\n      react_toastify__WEBPACK_IMPORTED_MODULE_6__.toast.success('You are now logged in, and your passkey has been successfully linked to your account!', {\n        position: 'bottom-right',\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: dark ? 'dark' : 'light'\n      });\n    }).catch(function (e) {\n      console.error(e);\n      react_toastify__WEBPACK_IMPORTED_MODULE_6__.toast.error('An unexpected error occurred. Code: BagAuth-057', {\n        position: 'bottom-right',\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: dark ? 'dark' : 'light'\n      });\n      navigate('/');\n    });\n  }, []);\n  return (0,preact_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_Elements_Loading__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {});\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9BdXRoL0FkZFBhc3NrZXkudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQTBDO0FBQ0E7QUFDZ0I7QUFDRTtBQUNuQztBQUNvQjtBQUNKO0FBQ0Y7QUFDSDtBQUFBO0FBQUE7QUFHckIsU0FBU2MsVUFBVUEsQ0FBQSxFQUFHO0VBQ2pDLE1BQU07SUFBRUM7RUFBTSxDQUFDLEdBQUdaLDJEQUFTLENBQUMsQ0FBQztFQUM3QixNQUFNYSxRQUFRLEdBQUdkLDZEQUFXLENBQUMsQ0FBQztFQUM5QixNQUFNO0lBQUVlO0VBQUssQ0FBQyxHQUFHUiw2Q0FBTyxDQUFDLENBQUM7RUFDMUIsTUFBTTtJQUFFUztFQUFPLENBQUMsR0FBR2IsK0NBQU0sQ0FDcEIsR0FBRUMsa0RBQU0sQ0FBQ2EsY0FBZSwyQkFBMEIsRUFDbkRaLDhDQUNKLENBQUM7RUFDRCxJQUFJLENBQUNRLEtBQUssRUFBRTtJQUNSQyxRQUFRLENBQUMsR0FBRyxDQUFDO0lBQ2IsT0FBT0gsdURBQUEsQ0FBQUYsd0RBQUEsSUFBSSxDQUFDO0VBQ2hCO0VBQ0FYLHdEQUFTLENBQUMsWUFBTTtJQUNaSSx5RUFBVSxDQUFDVyxLQUFLLENBQUMsQ0FBQ0ssSUFBSSxDQUFDLFVBQUNDLElBQUksRUFBSztNQUM3QkMsUUFBUSxDQUFDQyxNQUFNLEdBQUksZ0JBQWVGLElBQUksQ0FBQ0EsSUFBSSxDQUFDQSxJQUFLLHFCQUFvQixJQUFJRyxJQUFJLENBQUNBLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQ0MsV0FBVyxDQUFDLENBQUUsRUFBQztNQUM5SFYsUUFBUSxDQUFDLEdBQUcsQ0FBQztNQUNiRSxNQUFNLENBQUMsQ0FBQztNQUNSVixpREFBSyxDQUFDbUIsT0FBTyxDQUFDLHVGQUF1RixFQUFFO1FBQ25HQyxRQUFRLEVBQUUsY0FBYztRQUN4QkMsU0FBUyxFQUFFLElBQUk7UUFDZkMsZUFBZSxFQUFFLEtBQUs7UUFDdEJDLFlBQVksRUFBRSxJQUFJO1FBQ2xCQyxZQUFZLEVBQUUsSUFBSTtRQUNsQkMsU0FBUyxFQUFFLElBQUk7UUFDZkMsUUFBUSxFQUFFQyxTQUFTO1FBQ25CQyxLQUFLLEVBQUVuQixJQUFJLEdBQUcsTUFBTSxHQUFHO01BQzNCLENBQUMsQ0FBQztJQUNOLENBQUMsQ0FBQyxDQUFDb0IsS0FBSyxDQUFDLFVBQUNDLENBQUMsRUFBSztNQUNaQyxPQUFPLENBQUNDLEtBQUssQ0FBQ0YsQ0FBQyxDQUFDO01BQ2hCOUIsaURBQUssQ0FBQ2dDLEtBQUssQ0FBQyxpREFBaUQsRUFBRTtRQUMzRFosUUFBUSxFQUFFLGNBQWM7UUFDeEJDLFNBQVMsRUFBRSxJQUFJO1FBQ2ZDLGVBQWUsRUFBRSxLQUFLO1FBQ3RCQyxZQUFZLEVBQUUsSUFBSTtRQUNsQkMsWUFBWSxFQUFFLElBQUk7UUFDbEJDLFNBQVMsRUFBRSxJQUFJO1FBQ2ZDLFFBQVEsRUFBRUMsU0FBUztRQUNuQkMsS0FBSyxFQUFFbkIsSUFBSSxHQUFHLE1BQU0sR0FBRztNQUMzQixDQUFDLENBQUM7TUFDRkQsUUFBUSxDQUFDLEdBQUcsQ0FBQztJQUNqQixDQUFDLENBQUM7RUFDTixDQUFDLEVBQUUsRUFBRSxDQUFDO0VBQ04sT0FDSUgsdURBQUEsQ0FBQ1oseURBQU8sSUFBRSxDQUFDO0FBRW5CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV3d2Vic2l0ZS8uL3NyYy9jb21wb25lbnRzL0F1dGgvQWRkUGFzc2tleS50c3g/ODdjZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tICdwcmVhY3QvY29tcGF0JztcbmltcG9ydCBMb2FkaW5nIGZyb20gJy4uL0VsZW1lbnRzL0xvYWRpbmcnO1xuaW1wb3J0IHsgdXNlTmF2aWdhdGUsIHVzZVBhcmFtcyB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuaW1wb3J0IGFkZFBhc3NrZXkgZnJvbSAnLi4vLi4vYXBpL2F1dGgvcGFzc2tleXMvYWRkUGFzc2tleSc7XG5pbXBvcnQgdXNlU1dSIGZyb20gJ3N3cic7XG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICcuLi8uLi9jb25maWcvY29uZmlnJztcbmltcG9ydCB7IGZldGNoZXIgfSBmcm9tICcuLi8uLi9hcGkvaHR0cCc7XG5pbXBvcnQgeyB0b2FzdCB9IGZyb20gJ3JlYWN0LXRvYXN0aWZ5JztcbmltcG9ydCB7IHVzZURhcmsgfSBmcm9tICcuLi8uLi9BcHAnO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFkZFBhc3NrZXkoKSB7XG4gICAgY29uc3QgeyB0b2tlbiB9ID0gdXNlUGFyYW1zKCk7XG4gICAgY29uc3QgbmF2aWdhdGUgPSB1c2VOYXZpZ2F0ZSgpO1xuICAgIGNvbnN0IHsgZGFyayB9ID0gdXNlRGFyaygpO1xuICAgIGNvbnN0IHsgbXV0YXRlIH0gPSB1c2VTV1IoXG4gICAgICAgIGAke2NvbmZpZy5wcml2YXRlYXBpbGlua30vYXV0aC9pc0xvZ2dlZD9pbmZvcz10cnVlYCxcbiAgICAgICAgZmV0Y2hlcixcbiAgICApO1xuICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgbmF2aWdhdGUoJy8nKTtcbiAgICAgICAgcmV0dXJuIDw+PC8+O1xuICAgIH1cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBhZGRQYXNza2V5KHRva2VuKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgYWNjZXNzX3Rva2VuPSR7ZGF0YS5kYXRhLmRhdGF9OyBwYXRoPS87IGV4cGlyZXM9JHtuZXcgRGF0ZShEYXRlLm5vdygpICsgNiAqIDYwICogNjAgKiAxMDAwKS50b1VUQ1N0cmluZygpfWA7XG4gICAgICAgICAgICBuYXZpZ2F0ZSgnLycpO1xuICAgICAgICAgICAgbXV0YXRlKCk7XG4gICAgICAgICAgICB0b2FzdC5zdWNjZXNzKCdZb3UgYXJlIG5vdyBsb2dnZWQgaW4sIGFuZCB5b3VyIHBhc3NrZXkgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGxpbmtlZCB0byB5b3VyIGFjY291bnQhJywge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYm90dG9tLXJpZ2h0JyxcbiAgICAgICAgICAgICAgICBhdXRvQ2xvc2U6IDUwMDAsXG4gICAgICAgICAgICAgICAgaGlkZVByb2dyZXNzQmFyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjbG9zZU9uQ2xpY2s6IHRydWUsXG4gICAgICAgICAgICAgICAgcGF1c2VPbkhvdmVyOiB0cnVlLFxuICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwcm9ncmVzczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHRoZW1lOiBkYXJrID8gJ2RhcmsnIDogJ2xpZ2h0JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIHRvYXN0LmVycm9yKCdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkLiBDb2RlOiBCYWdBdXRoLTA1NycsIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbS1yaWdodCcsXG4gICAgICAgICAgICAgICAgYXV0b0Nsb3NlOiA1MDAwLFxuICAgICAgICAgICAgICAgIGhpZGVQcm9ncmVzc0JhcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgY2xvc2VPbkNsaWNrOiB0cnVlLFxuICAgICAgICAgICAgICAgIHBhdXNlT25Ib3ZlcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB0aGVtZTogZGFyayA/ICdkYXJrJyA6ICdsaWdodCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG5hdmlnYXRlKCcvJyk7XG4gICAgICAgIH0pO1xuICAgIH0sIFtdKTtcbiAgICByZXR1cm4gKFxuICAgICAgICA8TG9hZGluZyAvPlxuICAgICk7XG59Il0sIm5hbWVzIjpbInVzZUVmZmVjdCIsIkxvYWRpbmciLCJ1c2VOYXZpZ2F0ZSIsInVzZVBhcmFtcyIsImFkZFBhc3NrZXkiLCJ1c2VTV1IiLCJjb25maWciLCJmZXRjaGVyIiwidG9hc3QiLCJ1c2VEYXJrIiwiRnJhZ21lbnQiLCJfRnJhZ21lbnQiLCJqc3giLCJfanN4IiwiQWRkUGFzc2tleSIsInRva2VuIiwibmF2aWdhdGUiLCJkYXJrIiwibXV0YXRlIiwicHJpdmF0ZWFwaWxpbmsiLCJ0aGVuIiwiZGF0YSIsImRvY3VtZW50IiwiY29va2llIiwiRGF0ZSIsIm5vdyIsInRvVVRDU3RyaW5nIiwic3VjY2VzcyIsInBvc2l0aW9uIiwiYXV0b0Nsb3NlIiwiaGlkZVByb2dyZXNzQmFyIiwiY2xvc2VPbkNsaWNrIiwicGF1c2VPbkhvdmVyIiwiZHJhZ2dhYmxlIiwicHJvZ3Jlc3MiLCJ1bmRlZmluZWQiLCJ0aGVtZSIsImNhdGNoIiwiZSIsImNvbnNvbGUiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/Auth/AddPasskey.tsx\n");

/***/ })

}]);